{% extends 'auth/base_auth.html' %}
{% block title %}Restablecer contraseña - Smart Stack{% endblock %}
{% block content %}
<div class="w-full max-w-md mx-auto bg-white rounded-lg shadow-md p-6">
  <h2 class="text-2xl font-semibold text-[#468faf] mb-4 text-center">Restablecer contraseña</h2>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div class="mb-4">
        {% for category, message in messages %}
          <div class="text-sm px-4 py-2 rounded {{ 'bg-green-100 text-green-800' if category == 'success' else 'bg-red-100 text-red-800' }}">
            {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  <form method="POST">
    <!-- Nueva contraseña -->
    <label for="password" class="block text-sm font-medium text-gray-700 mb-1">Nueva contraseña</label>
    <div class="relative mb-4">
      <input type="password" name="password" id="password" required
             class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#a3c4dc]">
      <button type="button" onclick="togglePassword('password', 'icon-password')"
              class="absolute inset-y-0 right-2 flex items-center text-gray-500 hover:text-gray-700">
        <svg id="icon-password" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
             stroke="currentColor" class="w-5 h-5">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
        </svg>
      </button>
    </div>

    <!-- Confirmar contraseña -->
    <label for="confirm_password" class="block text-sm font-medium text-gray-700 mb-1">Confirmar contraseña</label>
    <div class="relative mb-4">
      <input type="password" name="confirm_password" id="confirm_password" required
             class="w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#a3c4dc]">
      <button type="button" onclick="togglePassword('confirm_password', 'icon-confirm')"
              class="absolute inset-y-0 right-2 flex items-center text-gray-500 hover:text-gray-700">
        <svg id="icon-confirm" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
             stroke="currentColor" class="w-5 h-5">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M2.458 12C3.732 7.943 7.523 5 12 5c4.477 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
        </svg>
      </button>
    </div>

    <button type="submit" class="w-full bg-[#468faf] text-white py-2 rounded hover:bg-[#3a7c91] transition">Actualizar contraseña</button>
  </form>

  <div class="mt-4 text-center">
    <a href="{{ url_for('auth.login') }}" class="text-sm text-[#468faf] hover:underline">Volver al inicio de sesión</a>
  </div>
</div>
{% endblock %}